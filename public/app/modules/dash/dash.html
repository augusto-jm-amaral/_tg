

<nav class="navbar navbar-default navbar-fixed-top" ng-controller="MenuController as menu">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">TCC</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
<!--       <ul class="nav navbar-nav">
        <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>
        <li><a href="#">Link</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Separated link</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">One more separated link</a></li>
          </ul>
        </li>
      </ul> -->
<!--       <form class="navbar-form navbar-left">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form> -->
      <ul class="nav navbar-nav navbar-right">
        <li><a>Olá {{menu.nome}}</a></li>
        <li class="dropdown">
          <a  class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Menu <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a>Perfil</a></li>
            <li><a>Guia</a></li>
<!--             <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li> -->
            <li role="separator" class="divider"></li>
            <li><a ng-click="menu.logout();">Sair</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="row" style="margin-top: 5em;">
    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
        <ul class="nav nav-pills nav-stacked" role="tablist">
            <li role="presentation" class="active"><a class="a-nav-custom" href="javascript(0);" data-target="#vendas" aria-controls="vendas" role="tab" data-toggle="tab">Vendas</a></li>
            <li role="presentation" class="active-custom"><a class="a-nav-custom" href="javascript(0);" data-target="#produtos" aria-controls="produtos" role="tab" data-toggle="tab">Produtos</a></li>
            <li role="presentation" class="active-custom"><a class="a-nav-custom" href="javascript(0);" data-target="#campanhas" aria-controls="campanhas" role="tab" data-toggle="tab">Campanhas</a></li>
            <li role="presentation" class="active-custom"><a class="a-nav-custom" href="javascript(0);" data-target="#upload" aria-controls="upload" role="tab" data-toggle="tab">Upload de Vendas</a></li>
        </ul>
    </div>

    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade in active" id="vendas">
              <div ng-controller="VendasController as v">
                  <div class="jumbotron">
                    <h2>Vendas<br><small>Lista de vendas já sincronizadas</small></h2>
                    <p>
                      <button ng-click="v.atualizar();" class="btn btn-success btn-lg" role="button">Atualizar Vendas</button>
                    </p>
                  </div>
                  <div class="row">
                    <div class="col-xs-12">

                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>ISBN</th>
                              <th>CPF</th>
                              <th>Valor</th>
                              <th>Itens</th>
                              <th>Produtos</th>
                              <!-- <th>Cor</th> -->
                              <!-- <th>Quantidade</th> -->
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat="venda in v.vendas">
                              <td>{{venda.isbn}}</td>
                              <td>{{venda.cpfUserBuy}}</td>
                              <td>{{venda.value}}</td>
                              <td>{{venda.produtos.length}}</td>
                              <td>{{v.listaProdutos(venda.produtos);}}</td>
                              <!-- <td>{{produto.tamanho}}</td> -->
                              <!-- <td>{{produto.cor}}</td> -->
                              <!-- <td>{{produto.qtd}}</td> -->
                            </tr>
                          </tbody>
                        </table>
                      
                    </div>
                  </div>
              </div>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="produtos">
              <div ng-controller="ProdutosController as p">
                  <div class="jumbotron">
                    <h2>Produtos<br><small>Lista de produtos já sincronizados</small></h2>
                    <p>
                      <button ng-click="p.atualizar();" class="btn btn-success btn-lg" role="button">Atualizar Lista</button>
                    </p>
                  </div>

                  <div class="row">
                    <div class="col-xs-12">

                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>ISBN</th>
                              <th>Nome</th>
                              <th>Quantidade Vendida</th>
                              <th>Valor Médio da Venda</th>
                              <!-- <th>Tamanho</th> -->
                              <!-- <th>Cor</th> -->
                              <!-- <th>Quantidade</th> -->
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat="produto in p.listaProdutos">
                              <td>{{produto._id.isbn}}</td>
                              <td>{{produto._id.nome}}</td>
                              <td>{{produto.quantidade}}</td>
                              <td>{{produto.avgAmount | currency: 'R$'}}</td>
                              <!-- <td>{{produto.tamanho}}</td> -->
                              <!-- <td>{{produto.cor}}</td> -->
                              <!-- <td>{{produto.qtd}}</td> -->
                            </tr>
                          </tbody>
                        </table>
                      
                    </div>
                  </div>
                
              </div>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="campanhas">
              <div ng-controller="CampanhasController as c">
                <div class="jumbotron">
                  <h2>Campanhas<br><small>Escolha os produtos que desejá divulgar aos clientes</small></h2>
                  <p>
                    <button ng-click="c.adicionar();" class="btn btn-primary btn-lg" role="button">Adicionar</button>
                  </p>
                </div>
                <div class="row">
                  <div class="col-xs-12"> 
                      <h3>Produtos em Campanha</h3>
                      <table class="table table-bordered">
                        <thead>
                          <tr>
                            <th>ISBN</th>
                            <th>Nome do produto</th>
                            <th>Título</th>
                            <th>Mensagem</th>
                            <th>Clientes Atingidos</th>
                            <th>Ações</th>
                            <!-- <th>Cor</th> -->
                            <!-- <th>Quantidade</th> -->
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="campanha in c.campanhas">
                            <td>{{campanha.produto.isbn}}</td>
                            <td>{{campanha.produto.name}}</td>
                            <td>{{campanha.nome}}</td>
                            <td>{{campanha.desc}}</td>
                            <td>{{campanha.views}}</td>
                            <td>
                              <button class="btn btn-default" ng-click="c.deletarCampanha(campanha);">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                              </button>
                              <button class="btn btn-default" ng-click="c.editar(campanha);">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                              </button>
                            </td>
                            <!-- <td>{{produto.tamanho}}</td> -->
                            <!-- <td>{{produto.cor}}</td> -->
                            <!-- <td>{{produto.qtd}}</td> -->
                          </tr>
                        </tbody>
                      </table>
                    
                  </div>
                </div>

                <div class="modal fade" id="myModal" tabindex="-1" role="dialog">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Adicionar Produto</h4>
                      </div>
                      <div class="modal-body">
                        <div class="row">
                          <div class="col-xs-12">
                            
                            <div class="col-xs-12" style="margin-bottom: 1em;">
                              <label>Digite um titulo para a campanha de seu produto</label>
                            </div>
                            <div class="col-xs-12">
                              <input type="text" class="form-control" ng-model="c.campanha.nome"></input>
                            </div>
                            <div class="col-xs-12" style="margin: 1em 0;">
                              <label>Selecione o Produto que deseja impulsionar aos seus clientes</label>
                            </div>
                            <div class="col-xs-8">
                              <select class="form-control" ng-model="c.campanha.produto" ng-options="produto._id as produto.name for produto in c.produtos"></select> 
                            </div>
                            <div class="col-xs-4">
                              <button class="btn btn-success btn-block" ng-click="c.carregaProdutos();">Atualizar Produtos</button>
                            </div>
                            <div class="col-xs-12" style="margin: 1em 0;">
                              <label>Digite uma mensagem para seus clientes</label>  
                            </div>
                            <div class="col-xs-12">
                              <textarea ng-model="c.campanha.desc" class="form-control" rows="6"></textarea>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                        <button type="button" ng-click="c.salvar();" class="btn btn-primary">Salvar</button>
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->

              </div>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="upload">
              <div class="row" ng-controller="UploaderController as uploader">
                <div class="col-xs-12">
                  <div class="jumbotron">
                    <h2>Upload catálogo de vendas <small>JSON</small></h2>
                    <p>Aqui você pode enviar suas vendas diárias para analisarmos os dados.</p>
                    <p>O Arquivo deve estar em formato <b>JSON</b>.</p>
                    <p>Vendas Carregadas: {{uploader.listaVendas.length}}</p>
                    <p ng-show="uploader.sincronizado"><span style="color: green">Sincronizado<span></p>
                    <p>
                      <a class="btn btn-primary btn-lg" ngf-select="uploader.uploadFiles($file, $invalidFiles)" role="button">Carregar</a>
                      <button ng-hide="uploader.sincronizado" class="btn btn-primary btn-lg" ng-disabled="uploader.listaVendas.length == 0" ng-click="uploader.sincronizar();" role="button">Sincronizar</button>
                      <button ng-click="uploader.limpar();" class="btn btn-default btn-lg" role="button">Limpar</button>
                    </p>
                    
                  </div>
                  <!-- <div class="row"> -->
                    <div class="panel panel-default col-xs-12" ng-repeat="venda in uploader.listaVendas">
                      <!-- <div class=""> -->
                      <div class="col-xs-12">
                        <h5><b>Venda: {{venda.isbn}}</b></h5>
                        <p ng-show="{{venda.cpfComprador}}">CPF Cliente: {{venda.cpfComprador}}</p>
                        <p ng-show="{{venda.valorTotal}}">Valor: {{venda.valorTotal | currency: 'R$'}}</p>
                      </div>
                      <div class="col-xs-12">
                        <!-- <div class="col-xs-12"> -->
                          <h5 class="text-center"><b>Produtos</b></h5>
                        <!-- </div> -->
                        <!-- <div class="panel panel-default col-xs-6" ng-repeat="venda.produtos"> -->
                          <!-- <span>Nome: </span><br> -->
                        <!-- </div> -->
                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>Nome</th>
                              <th>Valor</th>
                              <th>Descrição</th>
                              <th>Tipo</th>
                              <th>Tamanho</th>
                              <th>Cor</th>
                              <th>Quantidade</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat="produto in venda.produtos">
                              <td>{{produto.nome}}</td>
                              <td>{{produto.valor}}</td>
                              <td>{{produto.desc}}</td>
                              <td>{{produto.tipo}}</td>
                              <td>{{produto.tamanho}}</td>
                              <td>{{produto.cor}}</td>
                              <td>{{produto.qtd}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <!-- </div> -->
                    </div>
                  <!-- </div> -->
                </div>
              </div>
            </div>
        </div>
    </div>
</div>
